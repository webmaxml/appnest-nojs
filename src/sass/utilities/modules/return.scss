@use 'sass:map';
@use 'obj';

@function _port-exists($this, $port) {
  @return map-has-key(obj.get($this, 'ports'), $port);
}

@function _get($this, $port) { 
  @if not _port-exists($this, $port) { @error "no such port '#{$port}'"; }
  @return map-get(obj.get($this, 'ports'), $port); 
}

@function _get-last($this) { 
  @return obj.get($this, 'last-value'); 
}

@function _set($this, $port, $value) { 
  $ports: map.set(obj.get($this, 'ports'), $port, $value);
  $this: obj.set($this, 'ports', $ports); 
  @return obj.set($this, 'last-value', $value); 
}


@function create($value: null) {
  @return obj.create-class('Return', (
    'ports': (
      'default': $value
    ),
    'last-value': $value,
    'get': get-function('_get'),
    'set': get-function('_set'),
    'get-last': get-function('_get-last'),
  ));
}