@use 'sass:map';
@use 'obj';

@function _has-port($this, $port) {
  @return map.has-key(obj.get($this, 'ports'), $port);
}

@function _get-port($this, $port) {
  @if not _has-port($this, $port) { @error "no such port '#{$port}'"; }

  @return map.get(obj.get($this, 'ports'), $port);
}

@function _set-port($this, $port, $value) {
  $ports: map.set(obj.get($this, 'ports'), $port, $value);
  @return obj.set($this, 'ports', $ports);
}

@function create($ports: ()) {
  @return obj.create-class('Ports', (
    'ports': map.deep-merge(('default': null), $ports),
    'has-port': get-function('_has-port'),
    'get-port': get-function('_get-port'),
    'set-port': get-function('_set-port'),
  ));
}