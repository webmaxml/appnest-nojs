@use 'obj';
@use 'type' as *;
@use 'Prop';
@use 'custom-props';
@use 'list';

@function _get-props($this) { @return obj.get($this, 'props'); }

@function _create-prop-list($value, $key, $map) {
  @return if(
    custom-props.exists($key), 
    create(custom-props.get-props($key, $value)), 
    Prop.create($key, $value), 
  );
}

@function create($map) {
  $map: validate($map, 'map');
  $props: list.map-to-list($map, get-function('_create-prop-list'));

  @return obj.create-class('Prop-List', (
    'props': $props,
    'get-props': get-function('_get-props')
  ));
}